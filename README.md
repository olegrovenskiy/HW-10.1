# HW-10.1

# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

Обязательные задания

##  1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект 
представляет из себя платформу для вычислений с выдачей текстовых отчетов, 
которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http. 
Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?

Типовой набор метрик для системы:

● CPU LA.
● RAM/swap
● IOPS
● inodes
● FS

Почемы: так как он позволяет отслеживать все критичные эднменты - процессор, память, диски, дискрипторы и файловую систему.

##  2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. 
Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности 
перед клиентами и какое качество обслуживания. Что вы можете ему предложить?

RAM - мониторинг потребления оперативной памяти

inodes - мониторинг индексных дискрипторов.

Хорошая формулировка на сайте - https://ru.wikipedia.org/wiki/Inode

индексный дескриптор — это структура данных в традиционных для ОС UNIX файловых системах (ФС), 
таких как UFS, ext4. В этой структуре хранится метаинформация о стандартных файлах, 
каталогах или других объектах файловой системы, кроме непосредственно данных и имени.

Одна из проблем — inode могут «закончиться». В этом случае нельзя будет создать новый файл или каталог на устройстве, 
даже если там достаточно свободного места. 
При этом уже имеющиеся файлы можно полноценно изменять.

CPU la - мониторинг средней загрузки процессора

Можно предложить согласовать с клиентом SLA, и мониторить его. 
Так как взаимодействие с платформой осуществляется по протоколу http, то можно отслеживать коды запросов.
Как пример из лекции - установить SLA - 99%, то есть в 99% случаев мы должны отдавать http коды отличный от 4xx/5xx. 1%
выделяется на техническое обслуживание.

##  3.Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. 
Разработчики в свою очередь хотят видеть все ошибки, которые выдают их приложения. 
Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?

Внедрить подход - логи не нужны (Яндекс)

Данный подход предложен компанией “Яндекс”
на DevOpsConf 2019.
Формулируется данный подход следующим образом:
“Достаточно создать инфраструктуру доставки полезных
метрик и данных вокруг сервисов. В результате появятся
полезные метрики, которые говорят о сервисах, и прозрачно
показывают все, что с ними происходит.”

##  4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. 
Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. 
Данный параметр не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

Учтены не все запросы, правильная формула:

SLI = (summ_2xx_requests + summ_3xx_requests)/(summ_all_requests)

